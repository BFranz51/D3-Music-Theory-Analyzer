<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Music Mode Analysis</title>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">

		<!-- Load TensorFlow.js -->
		<!-- Load TensorFlow.js -->
		<!--<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.5"> </script>-->

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="https://d3js.org/d3.v4.min.js"></script>

		<!--<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.5" integrity="sha384-E/+1ci0VPB8A5v/ouQWJMlsC63Nu+e/Dsp3KT27K5h1HrvCXvsfiXQKVwg9/cnjA" crossorigin="anonymous"></script>-->

		<script src="scripts/tempData.js"></script>
		<script src="scripts/determineChords.js"></script>
		<script src="scripts/factorRoot.js"></script>
		<script src="scripts/simpleCompromise.js"></script>
		<script src="scripts/mood.js"></script>
		<script src="scripts/scores.js"></script>
		<script src="scripts/modevis.js"></script>
		<script src="scripts/d3graph.js"></script>
		<script src="scripts/controls.js"></script>
		<script src="scripts/loadTemplates.js"></script>

		<link rel="stylesheet" type="text/css" href="styles/styles.css">

	</head>

	<body>

		<div id="modal-0" class="modal-window">
			<div class="modal-content modal-0">
				<span class="loadTemplate" value="templates/largePiano.html" onload="pianoButtons"></span>
			</div>
		</div>

		<div id="modal-1" class="modal-window">
			<div class="modal-content modal-1">
				<span class="loadTemplate" value="templates/inputSimilarity.html" onload="sliderButtons"></span>
			</div>
		</div>

		<div id="modal-2" class="modal-window">
			<div class="modal-content modal-2">
				<span class="loadTemplate" value="templates/instructions.html" onload="instructionsButtons"></span>
			</div>
		</div>

		<div class="svg-container">
			<svg class="svg-content" preserveAspectRatio="xMidYMid meet" viewBox="0 0 1440 675"><rect width="100%" height="100%" fill="black"></rect></svg>
		</div>

	<script>
		// DEBUG: Trigger modal windows
		//$("#modal-2").css('display', 'block');
	</script>

	<script>
		$(document).ready(() => {
			waitForSVGSize();
		});

		var waitForSVGSize = () => {
			const svg = d3.select("svg");
			//alert (+svg.property("viewBox").baseVal.width);
			if (+svg.property("viewBox").baseVal.width > 0 && +svg.property("viewBox").baseVal.height > 0) {
				runStartingGraph();
			} else {
				window.setTimeout(waitForSVGSize, 100);
			}
		}

	</script>

	</body>
</html>
